/* ==================================================== */
/* === 1. DEFINICIÓN DE VARIABLES (PALETA VERDE BOSQUE) === */
/* ==================================================== */
:root {
    /* Fondos */
    --background: #1F2937; /* Gris Pizarra Oscuro */
    --foreground: #F3F4F6; /* Blanco Roto/Claro */
    --card: #374151;       /* Gris Pizarra Medio */
    --secondary: #4B5563;  /* Gris más oscuro para items */
    
    /* Colores de Acento */
    --primary: #548A5E;    /* Verde Acento Principal */
    --primary-foreground: #ffffff;
    
    --accent: #2c7a7b;     /* Verde Azulado (Botón Descargar) */
    --accent-foreground: #ffffff;
    
    --destructive: #E74C3C; 
    --destructive-foreground: #ffffff;
    
    --muted-foreground: #9CA3AF; 
    
    /* Bordes y Estructura */
    --border: rgba(255, 255, 255, 0.15); 
    --input: #1F2937; 
    --ring: #548A5E; 
    --radius: 0.5rem;
    --shadow: 0 4px 12px rgba(0,0,0,0.4); 
}

/* ==================================================== */
/* === 2. ESTILOS BASE Y UTILIDADES === */
/* ==================================================== */
body {
    background-color: var(--background);
    color: var(--foreground);
    font-family: 'Poppins', sans-serif;
    margin: 0;
}

/* Utilidades de Texto y Espacio */
.text-center { text-align: center; }
.mb-1 { margin-bottom: 0.5rem; }
.mb-2 { margin-bottom: 1rem; }
.full-width { width: 100%; }
.hidden { display: none !important; }

/* ==================================================== */
/* === 3. COMPONENTES GLOBALES (BOTONES, CARDS, INPUTS) === */
/* ==================================================== */

/* --- Botones --- */
.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.5rem 1rem;
    border-radius: var(--radius);
    border: none;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.2s ease;
    font-size: 0.95rem;
    gap: 0.5rem;
}

.btn:hover { opacity: 0.9; transform: translateY(-1px); }
.btn:active { transform: translateY(0); }

.btn-primary { background-color: var(--primary); color: var(--primary-foreground); }
.btn-secondary { background-color: var(--secondary); color: var(--foreground); }
.btn-accent { background-color: var(--accent); color: var(--accent-foreground); }
.btn-destructive { background-color: transparent; color: var(--destructive); }

/* ============================================== */
/* === BOTONES FLOTANTES (MODO VERTICAL) === */
/* ============================================== */

.btn-floating {
    position: fixed;
    z-index: 50;
    right: 20px; /* Ambos alineados a la derecha */
    
    /* TAMAÑO MÁS PEQUEÑO */
    padding: 0.4rem 0.8rem; /* Menos relleno */
    font-size: 0.8rem;      /* Texto más pequeño */
    min-width: 140px;       /* Ancho mínimo para que se vean uniformes */
    
    /* ESTILOS VISUALES (Glassmorphism) */
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
    border: 1px solid rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(4px);
    border-radius: var(--radius);
    
    /* Transición suave */
    transition: all 0.3s ease;
}

/* Efecto Hover */
.btn-floating:hover {
    transform: translateX(-3px); /* Se mueve un poco a la izquierda al pasar el mouse */
    filter: brightness(1.1);
}

/* === POSICIONES INDIVIDUALES (Uno debajo del otro) === */

/* 1. Botón Invitar (Arriba) */
.btn-invite { 
    top: 20px; 
    background: linear-gradient(135deg, var(--primary), #44704B);
} 

/* 2. Botón Descargar (Abajo, con separación) */
.btn-download { 
    top: 70px; /* 20px (top inicial) + altura botón + 10px de espacio */
    background: linear-gradient(135deg, var(--accent), #236c6d);
}

.back-button {
    position: fixed;
    top: 20px;
    left: 25px;
    font-size: 18px;
    color: white;
    cursor: pointer;
    background-color: rgba(0, 0, 0, 0.4);
    border-radius: 6px;
    padding: 8px 12px;
    text-align: center;
    transition: background 0.3s ease;
    z-index: 120;
}

.back-button:hover {
    background-color: rgba(255, 255, 255, 0.2);
}


/* --- Inputs y Formularios --- */
input, textarea, select {
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 0.6rem;
    width: 100%;
    box-sizing: border-box;
    background-color: var(--input);
    color: var(--foreground);
    font-family: inherit;
}

input:focus, textarea:focus, select:focus {
    outline: none;
    border-color: var(--ring);
    box-shadow: 0 0 0 2px rgba(84, 138, 94, 0.4);
}

/* --- Tarjetas (Cards) --- */
.card {
    background-color: var(--card);
    color: var(--card-foreground);
    border-radius: var(--radius);
    border: 1px solid var(--border);
    box-shadow: var(--shadow);
    padding: 1.5rem;
    position: relative;
}

.card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
    border-bottom: 1px solid var(--border);
    padding-bottom: 0.5rem;
}

.card-title { font-size: 1.25rem; font-weight: 700; margin: 0; }
.card-title-sm { font-size: 0.9rem; color: var(--muted-foreground); font-weight: 600; }

/* --- Modales --- */
.modal {
    position: fixed;
    inset: 0;
    background-color: rgba(0,0,0,0.75);
    backdrop-filter: blur(2px);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
}

.modal-content {
    background: var(--card);
    padding: 2rem;
    border-radius: var(--radius);
    width: 90%;
    max-width: 400px; /* Ancho estándar para modales */
    box-shadow: 0 10px 25px rgba(0,0,0,0.5);
    border: 1px solid var(--border);
}

.modal-buttons {
    display: flex;
    justify-content: flex-end;
    gap: 0.5rem;
    margin-top: 1.5rem;
}

/* --- Cabecera Hero (Movida desde Planner para ser Global) --- */
/* --- Cabecera Hero (Estilo IGUAL a Carpetas) --- */
.hero-header {
    position: relative;
    height: 150px; /* CAMBIO: De 250px a 150px */
    background-size: cover;
    background-position: center;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    /* Ajustes para igualar a carpetas */
    padding-top: 20px; 
    margin-bottom: 0; /* CAMBIO: Quitamos el -2rem de superposición */
}

.hero-header .overlay {
    background-color: rgba(0, 0, 0, 0.65);
    padding: 1.5rem 3rem;
    border-radius: 0.5rem;
    text-align: center;
    
    /* CAMBIO: Posicionamiento absoluto exacto al de carpetas */
    position: absolute; 
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: auto;
    height: auto;
    
    /* Quitamos bordes y blur para que sea idéntico al otro */
    backdrop-filter: none;
    border: none;
}

.hero-header h1 { 
    font-size: 3rem; /* Aumentado para coincidir */
    margin: 0; 
    font-weight: 700; 
}

.folder-name { 
    margin-top: 0.5rem; 
    font-size: 1.25rem; 
    color: #e5e7eb; /* O usa #9CA3AF si quieres el gris exacto de carpetas */
}

/* --- Tabs de Navegación --- */
.tabs {
    display: flex;
    justify-content: center;
    background: var(--card);
    /* CAMBIO: Quitamos el padding-top de 2rem porque ya no hay superposición */
    padding-top: 0; 
    border-bottom: 1px solid var(--border);
}

.tab-btn {
    background: transparent;
    border: none;
    color: var(--muted-foreground);
    padding: 1rem 2rem;
    cursor: pointer;
    font-size: 1rem;
    font-weight: 600;
    border-bottom: 3px solid transparent;
}

.tab-btn.active {
    color: var(--primary);
    border-bottom-color: var(--primary);
}

.tab-content { display: none; padding: 20px; }
.tab-content.active { display: block; }


/* ============================================== */
/* === BADGE DE USUARIOS ONLINE === */
/* ============================================== */
.online-badge {
    position: fixed;
    top: 25px;        /* Alineación vertical igual */
    right: 30px;      /* CAMBIO: Alineado a la DERECHA */
    /* left: 200px;   <-- ESTO LO BORRAMOS */
    
    z-index: 150;     /* Por encima de todo */
    
    background: rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(5px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    padding: 6px 12px;
    border-radius: 20px;
    
    display: flex;
    align-items: center;
    gap: 8px;
    
    font-size: 0.85rem;
    font-weight: 600;
    color: #e5e7eb;
    transition: all 0.3s ease;
    box-shadow: 0 2px 10px rgba(0,0,0,0.2);
}

/* En móvil, sugerencia: Mantenerlo abajo para no tapar contenido */
@media (max-width: 600px) {
    .online-badge {
        top: auto;
        bottom: 20px;
        left: 20px; /* En móvil se ve bien abajo a la izquierda */
        right: auto; 
    }
}

/* El resto del código (pulse-icon, keyframes, etc.) se queda igual */
.pulse-icon {
    font-size: 1.2rem;
    color: #9ca3af;
    line-height: 0;
}

.online-badge.active {
    background: rgba(84, 138, 94, 0.2);
    border-color: var(--primary);
    color: #fff;
}

.online-badge.active .pulse-icon {
    color: #4ade80;
    animation: pulse-animation 2s infinite;
}

@keyframes pulse-animation {
    0% { transform: scale(0.95); opacity: 1; text-shadow: 0 0 0 rgba(74, 222, 128, 0.7); }
    70% { transform: scale(1.1); opacity: 0.7; text-shadow: 0 0 10px rgba(74, 222, 128, 0); }
    100% { transform: scale(0.95); opacity: 1; text-shadow: 0 0 0 rgba(74, 222, 128, 0); }
}

/* ============================================== */
/* === OVERRIDE: CORRECCIÓN DE AUTOFILL === */
/* ============================================== */

/* Esto quita el fondo blanco y el texto negro que pone el navegador por defecto */
input:-webkit-autofill,
input:-webkit-autofill:hover, 
input:-webkit-autofill:focus, 
input:-webkit-autofill:active {
    /* 1. Usamos una sombra interior gigante para "tapar" el color blanco del navegador */
    -webkit-box-shadow: 0 0 0 30px var(--input) inset !important;
    
    /* 2. Cambiamos el color del texto para que sea tu blanco roto/claro */
    -webkit-text-fill-color: var(--foreground) !important;
    
    /* 3. Mantenemos el borde y radio consistentes */
    border: 1px solid var(--border) !important;
    border-radius: var(--radius) !important;
    
    /* 4. Transición para evitar parpadeos bruscos */
    transition: background-color 5000s ease-in-out 0s;
}

/* =========================================
   RESPONSIVE GLOBAL (MÓVIL)
   ========================================= */
@media (max-width: 768px) {
    /* 1. Ajustar el encabezado Hero */
    .hero-header {
        height: 120px; /* Más bajito */
    }
    .hero-header h1 {
        font-size: 1.8rem; /* Letra más pequeña */
    }
    .folder-name {
        font-size: 1rem;
    }

    /* 2. Pestañas Deslizables (Swipe) */
    .tabs {
        justify-content: flex-start; /* Alinear a la izquierda */
        overflow-x: auto; /* Permitir scroll lateral */
        white-space: nowrap; /* Que no se bajen a otra línea */
        padding-bottom: 5px; /* Espacio para la barra de scroll */
        -webkit-overflow-scrolling: touch; /* Scroll suave en iPhone */
    }
    
    /* Ocultar la barra de scroll fea pero mantener la funcionalidad */
    .tabs::-webkit-scrollbar {
        height: 4px;
    }
    .tabs::-webkit-scrollbar-thumb {
        background: rgba(255,255,255,0.2);
        border-radius: 4px;
    }

    .tab-btn {
        padding: 0.8rem 1.2rem; /* Botones un poco más compactos */
        font-size: 0.9rem;
    }

    /* 3. Ajustar Modales */
    .modal-content {
        width: 95%;
        padding: 1.5rem;
    }
}

/* =========================================
   FIX BOTÓN "VOLVER" EN MÓVIL (ICONO SOLAMENTE)
   ========================================= */
@media (max-width: 768px) {
    .back-button {
        /* 1. Tamaño fijo circular */
        width: 40px;
        height: 40px;
        border-radius: 50%;
        padding: 0;
        
        /* 2. Posición */
        left: 15px;
        top: 15px;
        
        /* 3. TRUCO CORREGIDO: "Matamos" el texto original */
        font-size: 0 !important; /* El texto desaparece y deja de ocupar espacio */
        
        /* 4. Centrado */
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: rgba(0, 0, 0, 0.6);
        border: 1px solid rgba(255, 255, 255, 0.2); /* Borde sutil para que destaque */
    }

    /* 5. Insertamos la flecha nueva */
    .back-button::after {
        content: "←"; 
        color: white; 
        font-size: 24px !important; /* Restauramos el tamaño SOLO para la flecha */
        font-weight: bold;
        line-height: 1; /* Evita que se desencuadre verticalmente */
        margin-top: -2px; /* Pequeño ajuste visual para centrar perfecto */
    }
}