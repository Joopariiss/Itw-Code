/* ============================================== */
/* === INVENTORY: LAYOUT Y COMPONENTES === */
/* ============================================== */

.inventory-container {
    /* CAMBIO CLAVE: Antes era 1200px. Ahora ocupa casi toda la pantalla. */
    max-width: 98%; 
    width: 100%;
    margin: 2rem auto;
    padding: 0 1rem;
    box-sizing: border-box;
}

/* === TARJETAS DE PRESUPUESTO (Grid Superior) === */
.grid-3 {
    display: grid;
    /* Ajuste para que las tarjetas no se estiren demasiado en pantallas ultra anchas */
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2rem;
}

.big-value {
    font-size: 2rem;
    font-weight: 800;
    margin-top: 0.5rem;
}

/* Estilos para saldo negativo */
.negative { color: var(--destructive); }
#remaining-card.negative { border-color: var(--destructive); }

/* === GRID PRINCIPAL (Formulario vs Lista) === */
.grid-main {
    display: grid;
    /* Mantenemos el formulario fijo (350px) y la lista toma TODO el resto */
    grid-template-columns: 350px 1fr; 
    gap: 1.5rem;
    align-items: start;
}

/* Input especial con prefijo ($) */
.input-with-prefix { position: relative; }
.input-with-prefix .prefix {
    position: absolute;
    left: 12px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--muted-foreground);
    font-weight: bold;
}
.input-with-prefix input { padding-left: 30px; font-size: 1.2rem; }

/* === LISTA DE ITEMS === */
.scroll {
    /* MEJORA PRO: Usamos altura de pantalla (vh) en vez de pixeles fijos 
       para que la lista sea más alta en monitores grandes. */
    max-height: 75vh; 
    overflow-y: auto;
    padding-right: 5px;
}

.item-header {
    display: grid;
    /* Ajuste de columnas para aprovechar el ancho extra */
    grid-template-columns: 50px 2fr 1.2fr 1fr 0.8fr 1fr 80px;
    background: var(--card); /* Color sólido para encabezado */
    padding: 1rem;
    border-radius: var(--radius);
    font-weight: 700;
    font-size: 0.95rem;
    color: var(--primary); /* Texto verde para destacar encabezados */
    border-bottom: 2px solid var(--border);
    margin-bottom: 0.5rem;
    position: sticky;
    top: 0;
    z-index: 10;
}

.item-row {
    display: grid;
    /* Mismas columnas que el header */
    grid-template-columns: 50px 2fr 1.2fr 1fr 0.8fr 1fr 80px;
    align-items: center;
    padding: 0.8rem 1rem;
    border-bottom: 1px solid var(--border);
    font-size: 0.95rem;
    background: var(--card); /* Fondo base */
    transition: background 0.2s;
}

/* MEJORA VISUAL: Efecto cebra (filas alternas un poco más oscuras) */
.item-row:nth-child(even) {
    background-color: rgba(0, 0, 0, 0.15);
}

.item-row:hover { 
    background-color: rgba(255, 255, 255, 0.05); /* Highlight al pasar el mouse */
}

/* Botones de acción pequeños */
.icon-btn {
    background: none;
    border: none;
    font-size: 1.2rem;
    cursor: pointer;
    padding: 6px;
    opacity: 0.7;
    transition: transform 0.2s, opacity 0.2s;
    border-radius: 4px;
}
.icon-btn:hover { 
    opacity: 1; 
    transform: scale(1.1); 
    background-color: rgba(255,255,255,0.1);
}

.edit-btn { color: var(--primary); }
.delete-btn { color: var(--destructive); }


/* Sugerencias (Chips) */
.suggestions-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-top: 0.5rem;
}
.suggestion {
    background: var(--secondary);
    border: 1px solid var(--border);
    border-radius: 20px;
    padding: 0.4rem 0.9rem;
    font-size: 0.85rem;
    cursor: pointer;
    color: var(--foreground);
    transition: all 0.2s;
}
.suggestion:hover { 
    background: var(--primary); 
    color: white; 
    transform: translateY(-1px);
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
}

/* ============================================== */
/* === POPUP DE CONFIRMACIÓN (Mini Tarjeta) === */
/* ============================================== */
.confirm-popup {
    background-color: #1e293b; /* Fondo oscuro sólido (Slate 800) */
    border: 1px solid rgba(255, 255, 255, 0.1); /* Borde sutil */
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5); /* Sombra fuerte para dar profundidad */
    padding: 15px;
    border-radius: 8px;
    z-index: 1000; /* Asegura que flote sobre todo */
    width: 240px;
    text-align: center;
    color: var(--foreground);
    animation: fadeIn 0.2s ease-out;
}

.confirm-popup p {
    margin-bottom: 12px;
    font-size: 0.9rem;
    color: #e2e8f0;
}

.popup-buttons {
    display: flex;
    justify-content: center;
    gap: 10px;
}

/* Animación suave al aparecer */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(-5px); }
    to { opacity: 1; transform: translateY(0); }
}

/* --- Estados del Presupuesto (Estilo Dark Mode Elegante) --- */

#remaining-card {
    transition: all 0.3s ease;
    border: 2px solid transparent; /* Grosor base */
    background-color: #1e293b; /* Forzamos el color de fondo oscuro original (Slate 800) */
}

/* > 75% : Verde (Saludable) */
#remaining-card.status-green {
    border-color: #10b981 !important;     /* Borde Verde Neón */
    box-shadow: 0 0 15px rgba(16, 185, 129, 0.2); /* Resplandor suave */
}
#remaining-card.status-green #remaining-budget {
    color: #34d399 !important;            /* Texto Verde Claro */
}
#remaining-card.status-green .card-title-sm {
    color: #6ee7b7 !important;            /* Título Verde pálido */
}


/* 50% - 75% : Amarillo (Precaución) - TU CASO ACTUAL */
#remaining-card.status-yellow {
    border-color: #f59e0b !important;     /* Borde Amarillo/Dorado */
    box-shadow: 0 0 15px rgba(245, 158, 11, 0.2);
}
#remaining-card.status-yellow #remaining-budget {
    color: #fbbf24 !important;            /* Texto Amarillo Brillante */
}
#remaining-card.status-yellow .card-title-sm {
    color: #fcd34d !important;
}


/* 25% - 50% : Naranja (Alerta) */
#remaining-card.status-orange {
    border-color: #f97316 !important;     /* Borde Naranja */
    box-shadow: 0 0 15px rgba(249, 115, 22, 0.2);
}
#remaining-card.status-orange #remaining-budget {
    color: #fb923c !important;            /* Texto Naranja Claro */
}
#remaining-card.status-orange .card-title-sm {
    color: #fdba74 !important;
}


/* < 25% : Rojo (Crítico) */
#remaining-card.status-red {
    border-color: #ef4444 !important;     /* Borde Rojo */
    box-shadow: 0 0 15px rgba(239, 68, 68, 0.2);
}
#remaining-card.status-red #remaining-budget {
    color: #f87171 !important;            /* Texto Rojo Claro */
}
#remaining-card.status-red .card-title-sm {
    color: #fca5a5 !important;
}

/* Responsive */
@media (max-width: 900px) {
    .grid-main { grid-template-columns: 1fr; }
    
    /* En móvil simplificamos la tabla para que no se rompa */
    .item-header, .item-row {
        grid-template-columns: 40px 1fr 1fr 80px; 
        font-size: 0.85rem;
        padding: 0.6rem;
    }
    /* Ocultamos columnas menos críticas en móvil */
    .col-category, .col-quantity, .col-total { display: none; } 
    
    .scroll { max-height: 500px; }
}

/* =========================================
   RESPONSIVE INVENTORY (MÓVIL)
   ========================================= */
@media (max-width: 768px) {
    /* 1. Tarjetas de Presupuesto (3 arriba) */
    .grid-3 {
        /* Cambiamos el minmax de 300px a 100% para que no se salgan */
        grid-template-columns: 1fr; 
        gap: 1rem;
    }

    .card-content.big-value {
        font-size: 1.5rem; /* Números un poco más chicos */
    }

    /* 2. Grid Principal (Formulario y Lista) */
    .grid-main {
        grid-template-columns: 1fr; /* Una columna */
    }

    /* 3. Formulario de Agregar Item */
    #add-item-form .mb-2[style*="display: flex"] {
        /* Romper el flex de Costo y Cantidad para que estén uno bajo otro */
        /* O mantenerlo si crees que caben, pero asegurar width */
        gap: 10px; 
    }

    /* 4. Lista de Items (La Tabla) */
    .inventory-container {
        padding: 0 0.5rem; /* Menos margen lateral */
    }

    /* Redefinimos las columnas para móvil estricto */
    .item-header, .item-row {
        /* Solo mostramos: Nombre, Costo y Botones */
        grid-template-columns: 1fr 80px 70px !important; 
        gap: 5px;
        padding: 0.8rem 0.5rem;
    }

    /* Ocultamos lo que no es vital en el celu */
    .col-number, .col-category, .col-quantity, .col-total {
        display: none;
    }
    
    /* Ajustes de texto */
    .col-name { font-size: 0.9rem; word-break: break-word; }
    .col-cost { font-size: 0.9rem; text-align: right; }
}

/* ============================================== */
/* === BOTÓN "AGREGAR ITEM" (ESTILO SHINY) === */
/* ============================================== */
.btn-shiny-add-item {
    width: 100%;           /* Ancho completo del contenedor */
    padding: 12px;         /* Relleno cómodo */
    margin-top: 10px;      /* Separación del input anterior */
    
    /* Estilo Visual */
    background-color: #548A5E; /* Tu Verde Principal */
    color: #ffffff;
    border: none;
    border-radius: 30px;   /* Forma de píldora (Pill shape) */
    
    /* Tipografía */
    font-size: 1rem;
    font-weight: 700;
    letter-spacing: 0.5px;
    cursor: pointer;
    
    /* Flexbox para centrar texto e icono */
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    
    /* EL EFECTO DE BRILLO (Glow) */
    box-shadow: 0 4px 15px rgba(84, 138, 94, 0.4);
    
    /* Transición suave */
    transition: all 0.3s ease;
}

/* Hover: Se eleva y brilla más */
.btn-shiny-add-item:hover {
    background-color: #44704B;
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(84, 138, 94, 0.6);
}

/* Click: Efecto de presión */
.btn-shiny-add-item:active {
    transform: translateY(0);
    box-shadow: 0 2px 5px rgba(84, 138, 94, 0.4);
}

/* =========================================
   FIX ANTI-ZOOM Y MEJORA TÁCTIL (MÓVIL)
   ========================================= */
@media (max-width: 768px) {
    
    /* 1. EVITAR ZOOM AUTOMÁTICO */
    /* Al forzar 16px, el navegador entiende que es legible y no hace zoom */
    input, 
    select, 
    textarea, 
    .form-control {
        font-size: 16px !important; 
    }

    /* 2. ÁREA TÁCTIL MÁS CÓMODA */
    /* Hacemos los inputs un poco más altos para que sea fácil tocarlos con el dedo */
    input, 
    select, 
    button {
        min-height: 45px; 
    }

    /* 3. AJUSTE ESPECÍFICO PARA EL DASHBOARD */
    /* Para que los inputs de "Costo" y "Cant." no se rompan al ser más grandes */
    #add-item-form .mb-2[style*="display: flex"] {
        align-items: flex-end; /* Alinearlos abajo */
    }
}

/* ... (después de las reglas de input que pusimos antes) ... */

    /* === FIX CALENDARIO FLATPICKR EN MÓVIL === */
    /* 1. Ajustar el contenedor del título para que no corte el texto */
    .flatpickr-current-month {
        font-size: 100% !important; /* Evitamos que escale el texto más allá de los 16px */
        width: 100% !important;      /* Forzamos a que use todo el ancho */
        left: 0 !important;          /* Quitamos el centrado absoluto que suele causar cortes */
        transform: none !important;  /* Quitamos transformaciones complejas */
        
        /* Usamos Flexbox para centrar bien Mes y Año */
        display: flex !important;
        justify-content: center !important;
        align-items: center !important;
        padding-top: 10px !important;
    }

    /* 2. Ajustar el input del Año para que quepa */
    .flatpickr-current-month .numInputWrapper {
        width: 70px !important; /* Le damos espacio suficiente al año */
    }

    /* 3. Asegurar que el input del año se vea bien */
    .flatpickr-current-month input.cur-year {
        font-size: 16px !important; /* Mantenemos el tamaño legible */
        font-weight: 700 !important;
    }